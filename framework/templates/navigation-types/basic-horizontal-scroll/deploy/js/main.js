(function(){var ViewsData,__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};ViewsData=function(_super){function ViewsData(t){if(null==t)throw new Error("The param p_data is null");this._data=[],this._views=t.views,ViewsData.__super__.constructor.apply(this,arguments)}return __extends(ViewsData,_super),ViewsData.VIEW_CREATED="view_created",ViewsData.ALL_VIEWS_CREATED="all_views_created",ViewsData.prototype.getData=function(t){if(null==this._views[t])throw new Error('The view with id "'+t+'" does not exists in config file');return this._views[t]},ViewsData.prototype.get=function(t){return null!=this._data[t]?this._data[t]:null},ViewsData.prototype.set=function(t){return this.get(t.id)||(this._data[t.id]=t),!1},ViewsData.prototype.createAll=function(){var t;for(t in this._views)this.create(t);return this.trigger(ViewsData.ALL_VIEWS_CREATED,{views:this._data}),!1},ViewsData.prototype.create=function(p_id){var data,k,klass,subview,v,view,_base,_ref;if(null!=this.get(p_id)?view=this.get(p_id):(data=this.getData(p_id),klass=eval(data["class"]),view=new klass(data,data.id+"-view")),null==view.parentView?(view.type="view",view.parentView=app.container,null==(_base=app.container).subviews&&(_base.subviews={}),app.container.subviews[view.id]=view):"string"==typeof view.parentView&&(view.parentView=this.get(view.parentView)),null!=view.subviews){_ref=view.subviews;for(k in _ref)v=_ref[k],subview=this.create(v.id),subview.type="subview",subview.parentView=view,view.subviews[v.id]=subview}return this.set(view),this.trigger(ViewsData.VIEW_CREATED,{view:view}),view},ViewsData.prototype.remove=function(t){return this._data[t]=null,delete this._data[t],!1},ViewsData.prototype.normalize=function(t){var e;return e=this._views[t],null!=(null!=e?e.parentView:void 0)?this.normalize(e.parentView):null!=e?e.id:void 0},ViewsData}(EventDispatcher);var BaseNavigationController,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};BaseNavigationController=function(t){function e(){this._removeFromWrapper=__bind(this._removeFromWrapper,this),this._appendToWrapper=__bind(this._appendToWrapper,this),this.change=__bind(this.change,this),e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.CHANGE="base_navigation_controller_change",e.CHANGE_VIEW="base_navigation_controller_change_view",e.CHANGE_SUBVIEW="base_navigation_controller_change_subview",e.prototype.setup=function(t){var e,i;return this._views=new ViewsData(t),((null!=(e=app.navigation)?e.instantiateViews:void 0)||void 0===(null!=(i=app.navigation)?i.instantiateViews:void 0))&&this._views.createAll(),!1},e.prototype.start=function(t){var e,i;if(null==t&&(t=null),this._started)throw new Error("The instance of BaseNavigationController already started");if(this._started=!0,null==(null!=(i=app.config.navigation)?i.defaultView:void 0))throw new Error('The property "defaultView" in config file is null or undefined.');return e=t?t:app.config.navigation.defaultView,this.goto(e),!1},e.prototype.goto=function(t){if(!this._started)throw new Error("The instance of BaseNavigationController is not started");return this.change(t),!1},e.get({type:function(){throw new Error("Override the visibleViews getter in "+this.constructor.type+" class")}}),e.get({visibleViews:function(){throw new Error("Override the visibleViews getter in "+this.constructor.name+" class")}}),e.get({currentView:function(){throw new Error("Override the currentView getter in "+this.constructor.name+" class")}}),e.get({previousView:function(){throw new Error("Override the previousView getter in "+this.constructor.name+" class")}}),e.get({data:function(){throw new Error("Override the data getter in "+this.constructor.name+" class")}}),e.prototype.change=function(){return this.trigger(e.CHANGE_VIEW,{data:this.data}),!1},e.prototype._appendToWrapper=function(t){var e;if(e=t.parentView,null!=t.parentView.subviewsWrapper&&(e=null==t.attachToParentWrapper?t.parentView.subviewsWrapper:t.parentView.find(t.attachToParentWrapper)),null==e)throw new Error("The instance of wrapper is not attached on the parent view");return e.appendChild(t),!1},e.prototype._removeFromWrapper=function(t){var e,i;i=(null!=t?t.parent:void 0)||(null!=t?t.parentView:void 0);try{null!=i&&i.removeChild(t)}catch(n){e=n,console.log(e.stack)}return!1},e}(EventDispatcher);var ScrollNavigationController,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};ScrollNavigationController=function(t){function e(){this._onAutoKill=__bind(this._onAutoKill,this),this._onCompleteAutoScroll=__bind(this._onCompleteAutoScroll,this),this._onStartAutoScroll=__bind(this._onStartAutoScroll,this),this._scrollToView=__bind(this._scrollToView,this),this._hide=__bind(this._hide,this),this._show=__bind(this._show,this),this._snapping=__bind(this._snapping,this),this._isVisible=__bind(this._isVisible,this),this._onScroll=__bind(this._onScroll,this),this.change=__bind(this.change,this),e.__super__.constructor.apply(this,arguments)}var i;return __extends(e,t),e.SCROLL="navigation_controller_scroll",i=0,e.get({type:function(){return"scroll"}}),e.get({visibleViews:function(){return this._visibleViews}}),e.get({currentView:function(){return this._currentView}}),e.get({previousView:function(){return this._previousView}}),e.get({data:function(){return{currentView:this.currentView,previousView:this.previousView,visibleViews:this._visibleViews}}}),e.prototype.start=function(t){var i,n,r,o,s,a;if(null==t&&(t=null),null==app.config.navigation.options)throw new Error("The options object in config.json file must be created to use this navigation type, see a example in source code.");this._options=app.config.navigation.options,this._visibleViews=this._visibleViews||[],this._autoScrolling=!1,this._orientation=null==this._options.orientation||"vertical"!==this._options.orientation&&"horizontal"!==this._options.orientation?"vertical":this._options.orientation,this._snapDelay=null!=(null!=(s=this._options.snap)?s.delay:void 0)&&this._options.snap.delay>0?this._options.snap.delay:0,this._scrollToTime=this._options.scrollToTime>=0?this._options.scrollToTime:.5,this._percentToShow=this._options.percentToShow>=0||this._options.percentToShow<=1?this._options.percentToShow:.5,this._pauseInvisibleViews=null!=this._options.pauseInvisibleViews?this._options.pauseInvisibleViews:!0,a=app.config.views;for(i in a)n=a[i],r=this._views.create(i),null==(o=r.data).snap&&(o.snap=!0),this._appendToWrapper(r),r.createStart();return window.addEventListener("scroll",this._onScroll),this._onScroll(null),e.__super__.start.call(this,t)},e.prototype.change=function(t){var e;if((null!=(e=this._currentView)?e.id:void 0)!==t)return null!=this._currentView&&(this._previousView=this._currentView),this._currentView=this._views.create(t),this._scrollToView(t)},e.prototype._onScroll=function(){var t,i,n,r,o,s,a,u,h;this._visibleViews=this._visibleViews||[],t=null,u=app.config.views;for(n in u)if(r=u[n],o=this._views.create(n),a="vertical"===this._orientation?o.height+o.element.offsetTop:o.width+o.element.offsetLeft,s=a-this.scrollValue,this._isVisible(o)?this._visibleViews.indexOf(o)<0&&this._visibleViews.push(o):(i=this._visibleViews.indexOf(o),i>=0&&ArrayUtils.removeItemByIndex(i,this._visibleViews)),s>this.windowValue*this._percentToShow&&null===t){if(t=o,this._snapping(o),(null!=(h=this._currentView)?h.id:void 0)===o.id)continue;null!=this._currentView&&(this._previousView=this._currentView),this._currentView=this._views.create(o.id),this._show(o)}else this._hide(o);return this.trigger(e.SCROLL,{percent:this.scrollPercent,value:this.scrollValue})},e.prototype._isVisible=function(t){var e,i,n,r;return"vertical"===this._orientation?(r=t.element.offsetTop,e=r+t.height,this.scrollValue+window.innerHeight>r&&this.scrollValue+window.innerHeight<e+window.innerHeight):(i=t.element.offsetLeft,n=i+t.width,this.scrollValue+window.innerWidth>i&&this.scrollValue+window.innerWidth<n+window.innerWidth)},e.prototype._snapping=function(t){return!this._autoScrolling&&this._snapDelay>0&&(TweenMax.killDelayedCallsTo(this._scrollToView),t.data.snap||t.snap)?TweenMax.delayedCall(this._snapDelay,this._scrollToView,[t.id]):void 0},e.prototype._show=function(t){return this.trigger(BaseNavigationController.CHANGE_VIEW,{data:this.data}),t.showed?this._pauseInvisibleViews?t.resume():void 0:t.showStart()},e.prototype._hide=function(t){return this._isVisible(t)||this._pauseInvisibleViews&&t.pause(),t.id!==this._currentView.id&&t.showed?t.hideStart():void 0},e.prototype._scrollToView=function(t){var e,i;return i=this._views.create(t),TweenMax.killDelayedCallsTo(this._scrollToView),TweenMax.killTweensOf(window),e="vertical"===this._orientation?{y:i.element.offsetTop,onAutoKill:this._onAutoKill}:{x:i.element.offsetLeft,onAutoKill:this._onAutoKill},TweenMax.to(window,this._scrollToTime,{scrollTo:e,ease:Quad.easeOut,onStart:this._onStartAutoScroll,onComplete:this._onCompleteAutoScroll,onCompleteParams:[i]})},e.prototype._onStartAutoScroll=function(){return this._autoScrolling=!0},e.prototype._onCompleteAutoScroll=function(t){return this._autoScrolling=!1,this._show(t)},e.prototype._onAutoKill=function(){return this._autoScrolling=!1},e.get({scrollPercent:function(){var t,e;return t=document.body,e=document.documentElement,"vertical"===this._orientation?(e.scrollTop+t.scrollTop)/(e.scrollHeight-e.clientHeight):(e.scrollLeft+t.scrollLeft)/(e.scrollWidth-e.clientWidth)}}),e.get({scrollValue:function(){var t,e;return t=document.body,e=document.documentElement,"vertical"===this._orientation?"undefined"!=typeof pageYOffset?pageYOffset:(e=e.clientHeight?e:t,e.scrollTop):"undefined"!=typeof pageXOffset?pageXOffset:(e=e.clientWidth?e:t,e.scrollLeft)}}),e.get({windowValue:function(){return"vertical"===this._orientation?window.innerHeight:window.innerWidth}}),e}(BaseNavigationController);var NavigationRouter,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};NavigationRouter=function(t){function e(){this._onPathChange=__bind(this._onPathChange,this),this._routes=[],this._numRoutes=0,this._trigger=!0,e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.CHANGE="route_path_change",e.CHANGE_ROUTE="route_match",e.prototype.setup=function(t,e){var i,n,r,o;if(null==t&&(t=null),null==e&&(e=!1),!t){t=window.location.href;try{i=document.getElementsByTagName("base"),i.length>0&&(i=i[0],t=i.getAttribute("href"))}catch(s){n=s,console.log(n.stack)}}return this._rootPath=t.replace(/^(.*?)\/*$/,"$1/"),this._rawPath="",this._usePushState=e?!1:null!=("undefined"!=typeof window&&null!==window&&null!=(o=window.history)?o.pushState:void 0),this._usePushState?(this._rootPath!==window.location.href&&(r=this._getPath(),this.goto(r,!1)),window.addEventListener?window.addEventListener("popstate",this._onPathChange):window.attachEvent("onpopstate",this._onPathChange)):(this._rootPath!==window.location.href&&(r=this._getPath(),window.location=this._rootPath+"#!/"+r),window.addEventListener?window.addEventListener("hashchange",this._onPathChange):window.attachEvent("onhashchange",this._onPathChange)),this._onPathChange(),this},e.prototype._getPath=function(){var t,e;return e=window.location.href,t="/"===e.substr(e.length-1,e.length),t&&(e=e.substr(0,e.length-1)),0===e.indexOf(this._rootPath)&&(e=e.substr(this._rootPath.length)),e=e.replace(/^(?:#?!?\/*)([^?]*\??.*?)$/,"$1")},e.prototype._parsePath=function(t){var e,i,n;return n=/^(?:#?!?\/*)([^?]*)\??(.*?)$/.exec(t),i=n[1],e=this._parseParams(n[2]),{rawPath:t,path:i,params:e}},e.prototype._parseParams=function(t){var e,i,n,r;if(r={},t)for(n=/&?([^=&]+)=?([^=&]*)/g,e=0;i=n.exec(t);)r[i[1]]=i[2];return r},e.prototype._onPathChange=function(t){return null==t&&(t=null),this._currentPath=this._getPath(),this._trigger&&this._triggerPath(this._currentPath),this._trigger=!0,this._replaceData?(this.goto(this._replaceData[0],!1),this._replaceData=null):this.trigger(e.CHANGE,this._parsePath(this._currentPath)),!1},e.prototype._triggerPath=function(t){var i,n,r,o,s,a;if(n=this._parsePath(t),a=this._checkRoutes(n.path),s=a[0],o=a[1],s)for(i=s.length;i-->0;)r=s[i],this.trigger(e.CHANGE_ROUTE,{route:r.route,routeData:o,path:t,pathData:n,data:r.data});return!1},e.prototype.getCurrentPath=function(){return this._currentPath},e.prototype.getParsedPath=function(){return this._parsePath(this._currentPath)},e.prototype.goto=function(t,e){return null==e&&(e=!0),t=t.replace(/^(?:#?!?\/*)([^?]*\??.*?)$/,"$1"),t!==this._currentPath?(this._currentPath=t,this._trigger=e,this._usePushState?(history.pushState({},t,this._rootPath+t),this._trigger&&this._onPathChange(),this._trigger=!0):window.location.hash="!/"+t,!1):void 0},e.prototype.replace=function(t,e){return null==e&&(e=!1),t=t.replace(/^(?:#?!?\/*)([^?]*\??.*?)$/,"$1"),t!==this._currentPath&&(this._currentPath=t,this._usePushState?history.replaceState({},t,this._rootPath+t):(this._trigger=!1,history.back(),this._replaceData=[t])),e&&this.triggerPath(t),!1},e.prototype.triggerPath=function(t){return this._triggerPath(t),!1},e.prototype.triggerCurrentPath=function(){return this._triggerPath(this._getPath()),!1},e.prototype.addRoute=function(t,e){var i,n,r,o,s,a,u;if(null==e&&(e=null),"string"!=typeof t)for(n=t.length;n-->0;)this.addRoute(t[n],e);for(a=/\{(.*?)\}/g,r=[],s=0;o=a.exec(t);)r[s++]=o[1];a=t,"*"===a&&(a=".*");try{a=a.replace(/(.*?)\/*$/,"$1"),u=new RegExp("(?:"+a.replace(/\{.*?\}/g,"(.+?)")+"$)","g")}catch(h){return i=h,void console.log(i.stack)}return this._routes[this._numRoutes++]={data:e,route:t,routeRE:u,labels:r,numLabels:r.length,numSlashes:t.split("/").length},this._routes.sort(this._sortRoutes),!1},e.prototype.removeRoute=function(t){var e,i;for(e=this._numRoutes;e-->0;)i=this._routes[e],i.route===t&&this._routes.splice(e,1);return this._numRoutes=this._routes.length,!1},e.prototype.removeAllRoutes=function(){return this._routes.length=0,this._numRoutes=this._routes.length},e.prototype._checkRoutes=function(t){var e,i,n,r,o,s,a,u,h,l,p,_,c,d;for(n=this._numRoutes,i=null,e=null,h=[],l=0,t="/"+t;n-->0;){if(u=this._routes[n],i){if(u.route!==i)break;h[l++]=u}if(a=u.routeRE,a.lastIndex=0,s=a.exec(t)&&"/"!==u.route)for(e={},h[l++]=u,i=u.route,d=u.labels,r=_=0,c=d.length;c>_;r=++_)o=d[r],p=s[r+1],e[o]=p}return[h,e]},e.prototype._sortRoutes=function(t,e){return t.numLabels<e.numLabels?-1:t.numLabels>e.numLabels?1:t.numSlashes<e.numSlashes?-1:t.numSlashes>e.numSlashes?1:t.route===e.route?0:t.route<e.route?-1:t.route>e.route?1:0},e}(EventDispatcher);var Navigation,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Navigation=function(t){function e(t){if(null==t&&(t=null),this._change=__bind(this._change,this),this.getRouteByView=__bind(this.getRouteByView,this),this.getViewByRoute=__bind(this.getViewByRoute,this),this.gotoView=__bind(this.gotoView,this),this.gotoDefault=__bind(this.gotoDefault,this),this.replaceRoute=__bind(this.replaceRoute,this),this.gotoRoute=__bind(this.gotoRoute,this),this.setRoute=__bind(this.setRoute,this),this.goto=__bind(this.goto,this),this.start=__bind(this.start,this),this.setup=__bind(this.setup,this),!(t instanceof BaseNavigationController))throw new Error("The instance of "+t+" class is not either BaseNavigationController class");i=t,n=new NavigationRouter,app.navigation=this,e.__super__.constructor.apply(this,arguments)}var i,n;return __extends(e,t),e.CHANGE_ROUTE="navigation_change_route",e.CHANGE_VIEW="navigation_change_view",e.CHANGE_INTERNAL_VIEW="navigation_change_internal_view",i=null,n=null,e.prototype.setup=function(t){var e,r,o,s,a,u;i.on(BaseNavigationController.CHANGE,this._change),i.on(BaseNavigationController.CHANGE_VIEW,this._change),i.setup(t),n.on(NavigationRouter.CHANGE,this._change),n.on(NavigationRouter.CHANGE_ROUTE,this._change),n.setup(app.root,null!=(o=app.config.navigation)?o.forceHashBang:void 0),s=t.views;for(e in s)r=s[e],null!=r.route&&n.addRoute(r.route);return((null!=(a=app.config.navigation)?a.autoStart:void 0)||void 0===(null!=(u=app.config.navigation)?u.autoStart:void 0))&&this.start(),!1},e.prototype.start=function(t){var e,r,o,s;return null==t&&(t=null),s=null,r=n._parsePath(n.getCurrentPath()),o=n._checkRoutes(r.path)[0],o.length>0?(e=o[0].route,s=this.getViewByRoute(e)):s=null,i.start(s),!1},e.get({visibleViews:function(){return this._visibleViews||i.visibleViews}}),e.get({currentView:function(){var t;return t=this._currentView||i.currentView,t.routeData=this.routeData,t}}),e.get({previousView:function(){return this._previousView||i.previousView}}),e.get({routeData:function(){var t,e,i,r,o;return t=n._parsePath(n.getCurrentPath()),i=n._checkRoutes(t.path),e={},null!=i&&(e.raw=t.rawPath,e.params=t.params,e.route=null!=(r=i[0])&&null!=(o=r[0])?o.route:void 0,e.parsed=i[1]),e}}),e.prototype.goto=function(t){return 0===t.indexOf("/")?this.gotoRoute(t):this.gotoView(t),!1},e.prototype.setRoute=function(t,e){return null==e&&(e=!1),this.gotoRoute(t,e),!1},e.prototype.gotoRoute=function(t,e){if(null==e&&(e=!1),null!=t){if(0!==t.indexOf("/"))throw new Error('The value "'+t+'" is not a valid format to route ("/example")');return n.goto(t,e),!1}},e.prototype.replaceRoute=function(t,e){if(null==e&&(e=!1),null!=t){if(0!==t.indexOf("/"))throw new Error('The value "'+t+'" is not a valid format to route ("/example")');return n.replace(t,e),!1}},e.prototype.gotoDefault=function(){var t,e;return null!=(null!=(e=app.config.navigation)?e.defaultView:void 0)&&(t=app.config.navigation.defaultView,0===t.indexOf("/")?this.gotoRoute(t):this.gotoView(t)),!1},e.prototype.gotoView=function(t){if(0===t.indexOf("/"))throw new Error('The value "'+t+'" is not a valid format to viewID ("exampleID")');return i.goto(t),!1},e.prototype.getViewByRoute=function(t){var e,i,n;n=app.config.views;for(e in n)if(i=n[e],null!=i.route&&i.route===t)return i.id;return null},e.prototype.getRouteByView=function(t){var e,i,n;n=app.config.views;for(e in n)if(i=n[e],null!=i.route&&i.id===t)return i.route;return null},e.prototype._change=function(t){switch(null==t&&(t=null),t.type){case BaseNavigationController.CHANGE_VIEW:return this._currentView=t.data.currentView,this._previousView=t.data.previousView,this._visibleViews=t.data.visibleViews,this.trigger(e.CHANGE_VIEW,{data:t.data});case BaseNavigationController.CHANGE:return this.trigger(e.CHANGE_INTERNAL_VIEW,{view:t.view,transition:t.transition});case NavigationRouter.CHANGE_ROUTE:if(this.trigger(e.CHANGE_ROUTE,{data:this.routeData}),null!=this.routeData.route)return this.gotoView(this.getViewByRoute(this.routeData.route))}},e}(EventDispatcher);var NavigationContainer,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};NavigationContainer=function(t){function e(){this.setupNavigation=__bind(this.setupNavigation,this),e.__super__.constructor.call(this,null,"nav-container")}return __extends(e,t),e.prototype.setupNavigation=function(t){return this._navigation=new Navigation(this.controller),this._navigation.setup(t),!1},e.get({navigation:function(){return this._navigation}}),e.get({controller:function(){throw new Error("Override this method with a instance of BaseNavigationController.")}}),e}(BaseView);var TemplateHomeView,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};TemplateHomeView=function(t){function e(t,i){null==t&&(t=null),null==i&&(i=null),this.destroy=__bind(this.destroy,this),this.hideComplete=__bind(this.hideComplete,this),this.hide=__bind(this.hide,this),this.hideStart=__bind(this.hideStart,this),this.showComplete=__bind(this.showComplete,this),this.show=__bind(this.show,this),this.showStart=__bind(this.showStart,this),this.createComplete=__bind(this.createComplete,this),this.create=__bind(this.create,this),this.createStart=__bind(this.createStart,this),e.__super__.constructor.call(this,t,"views")}return __extends(e,t),e.prototype.createStart=function(t){return null==t&&(t=null),this.background=new BaseDOM("div"),this.appendChild(this.background),this.background.className="background",this.background.css({opacity:0,height:"100%","background-color":"#"+Math.floor(16777215*Math.random()).toString(16)}),this.image=new BaseDOM({element:this.loader.getResult("image")}),this.background.appendChild(this.image),e.__super__.createStart.apply(this,arguments)},e.prototype.create=function(t){return null==t&&(t=null),e.__super__.create.apply(this,arguments)},e.prototype.createComplete=function(t){return null==t&&(t=null),e.__super__.createComplete.apply(this,arguments)},e.prototype.showStart=function(t){return null==t&&(t=null),e.__super__.showStart.apply(this,arguments)},e.prototype.show=function(t){return null==t&&(t=null),TweenMax.to(this.background.element,1,{css:{opacity:1},onComplete:function(t){return function(){return e.__super__.show.apply(t,arguments)}}(this)})},e.prototype.showComplete=function(t){return null==t&&(t=null),e.__super__.showComplete.apply(this,arguments)},e.prototype.hideStart=function(t){return null==t&&(t=null),e.__super__.hideStart.apply(this,arguments)},e.prototype.hide=function(t){return null==t&&(t=null),TweenMax.to(this.background.element,.5,{opacity:0,onComplete:function(t){return function(){return e.__super__.hide.apply(t,arguments)}}(this)})},e.prototype.hideComplete=function(t){return null==t&&(t=null),e.__super__.hideComplete.apply(this,arguments)},e.prototype.destroy=function(t){return null==t&&(t=null),this.image.destroy(),this.background.removeChild(this.image),this.image=null,TweenMax.killTweensOf(this.background.element),this.background.destroy(),this.removeChild(this.background),this.background=null,e.__super__.destroy.apply(this,arguments)},e}(BaseView);var TemplateSubView,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};TemplateSubView=function(t){function e(t,i){null==t&&(t=null),null==i&&(i=null),this.destroy=__bind(this.destroy,this),this.hideComplete=__bind(this.hideComplete,this),this.hide=__bind(this.hide,this),this.hideStart=__bind(this.hideStart,this),this.showComplete=__bind(this.showComplete,this),this.show=__bind(this.show,this),this.showStart=__bind(this.showStart,this),this.createComplete=__bind(this.createComplete,this),this.create=__bind(this.create,this),this.resume=__bind(this.resume,this),this.pause=__bind(this.pause,this),this.render=__bind(this.render,this),this.createStart=__bind(this.createStart,this),e.__super__.constructor.call(this,t,"views")}return __extends(e,t),e.prototype.createStart=function(t){return null==t&&(t=null),this.background=new BaseDOM("div"),this.appendChild(this.background),this.background.className="background",this.background.css({opacity:0,height:"100%","background-color":"#"+Math.floor(16777215*Math.random()).toString(16)}),this.image=new BaseDOM({element:this.loader.getResult("image")}),this.background.appendChild(this.image),e.__super__.createStart.apply(this,arguments)},e.prototype.render=function(t){return null==t&&(t=null),null==this.i&&(this.i=0),console.log("render",this.id,this.i++)},e.prototype.pause=function(){return clearInterval(this.timeout),e.__super__.pause.apply(this,arguments)},e.prototype.resume=function(){return clearInterval(this.timeout),this.timeout=setInterval(this.render,1e3),e.__super__.resume.apply(this,arguments)},e.prototype.create=function(t){return null==t&&(t=null),e.__super__.create.apply(this,arguments)},e.prototype.createComplete=function(t){return null==t&&(t=null),e.__super__.createComplete.apply(this,arguments)},e.prototype.showStart=function(t){return null==t&&(t=null),e.__super__.showStart.apply(this,arguments)},e.prototype.show=function(t){return null==t&&(t=null),this.resume(),TweenMax.killTweensOf(this.background.element),TweenMax.to(this.background.element,.5,{css:{opacity:1},onComplete:function(t){return function(){return e.__super__.show.apply(t,arguments)}}(this)})},e.prototype.showComplete=function(t){return null==t&&(t=null),e.__super__.showComplete.apply(this,arguments)},e.prototype.hideStart=function(t){return null==t&&(t=null),e.__super__.hideStart.apply(this,arguments)},e.prototype.hide=function(t){return null==t&&(t=null),TweenMax.killTweensOf(this.background.element),TweenMax.to(this.background.element,.3,{css:{opacity:0},onComplete:function(t){return function(){return e.__super__.hide.apply(t,arguments)}}(this)})},e.prototype.hideComplete=function(t){return null==t&&(t=null),e.__super__.hideComplete.apply(this,arguments)},e.prototype.destroy=function(t){return null==t&&(t=null),this.image.destroy(),this.background.removeChild(this.image),this.image=null,TweenMax.killTweensOf(this.background.element),this.background.destroy(),this.removeChild(this.background),this.background=null,e.__super__.destroy.apply(this,arguments)},e}(BaseView);var Main,__bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};return new(Main=function(t){function e(){return this.click=__bind(this.click,this),this.scroll=__bind(this.scroll,this),this.changeNav=__bind(this.changeNav,this),this.removeListener=__bind(this.removeListener,this),this.addListener=__bind(this.addListener,this),this.create=__bind(this.create,this),e.__super__.constructor.apply(this,arguments)}var i,n;return __extends(e,t),i=0,n=new ScrollNavigationController,e.prototype.create=function(t){var r,o,s,a;null==t&&(t=null),o=new BaseDOM,o.className="menu",this.appendChildAt(o,0),a=app.config.views;for(r in a)s=a[r],this.button=new BaseDOM,o.appendChild(this.button),this.button.className="menu-button",this.button.attr({id:s.id}),this.button.text=s.id,this.button.element.on("click",this.click);return this.bar=new BaseDOM,o.appendChildAt(this.bar,0),this.bar.className="bar",this.bar.css({width:"0%"}),n.on(ScrollNavigationController.SCROLL,this.scroll),i=1e3*app.config.navigation.options.scrollToTime,this.timeout=setTimeout(this.addListener,i),e.__super__.create.apply(this,arguments)},e.prototype.addListener=function(){return app.navigation.on(Navigation.CHANGE_VIEW,this.changeNav)},e.prototype.removeListener=function(){return app.navigation.off(Navigation.CHANGE_VIEW,this.changeNav)},e.prototype.changeNav=function(t){var e;return e=t.data.currentView.route,app.navigation.gotoRoute(e,!1)},e.prototype.scroll=function(t){return this.bar.css({width:String(100*t.percent+"%")})},e.prototype.click=function(t){var e;return this.removeListener(),e=app.config.views[t.srcElement.id].route,app.navigation.gotoRoute(e,!0),clearTimeout(this.timeout),this.timeout=setTimeout(this.addListener,i)},e.get({controller:function(){return n}}),e}(NavigationContainer))}).call(this);