<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>../../source/coffee/Erlik.coffee - Erlik</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="http://slikland.com/media/images/logo_docs.png" title="Erlik"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Erlik.html">Erlik</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: ../../source/coffee/Erlik.coffee</h1>

<div class="file">
    <pre class="code prettyprint linenums">
#namespace slikland
#import slikland.display.BaseDOM
#import erlik.*

class Erlik extends BaseDOM
	@BASE_CSS: &quot;&quot;&quot;#inject ../stylus/erlik.css&quot;&quot;&quot;
	@STYLES: [&#x27;display&#x27;, &#x27;position&#x27;, &#x27;width&#x27;, &#x27;height&#x27;, &#x27;top&#x27;, &#x27;left&#x27;, &#x27;bottom&#x27;, &#x27;right&#x27;]
	@_init:()-&gt;
		if @_inited
			return
		@_inited = true
		@_appendCSS(@BASE_CSS)
		@_checkDependencies()
	@_checkDependencies:()=&gt;
		_cssDependencies = [
			{rule: &#x27;.fa&#x27;, src: &#x27;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css&#x27;}
		]
		for ss in document.styleSheets
			rules = ss.rules || ss.cssRules
			for r in rules
				for d in _cssDependencies
					if d.found
						continue
					if r.selectorText == d.rule
						d.found = true
		for c in _cssDependencies
			if c.found
				continue
			@_embedCSS(c.src)
	@_embedCSS:(href)-&gt;
		link = document.createElement(&#x27;link&#x27;)
		link.rel = &quot;stylesheet&quot;
		link.href = href
		head = document.querySelector(&#x27;head&#x27;) || document.body
		head.appendChild(link)
	@_appendCSS:(content, container = null)-&gt;
		head = document.querySelector(&#x27;head&#x27;) || document.body
		if !container
			container = document.createElement(&#x27;style&#x27;)
			container.type = &quot;text/css&quot;
			head.appendChild(container)
			if document.all
				si = head.querySelectorAll(&#x27;style&#x27;).length
				container = document.styleSheets[si]
		if document.all
			container.cssText = content
		else
			container.appendChild(document.createTextNode(content))
		return container

	###*
	Spritesheet Animation class

	This class will animate a spritesheet. It already handles responsiveness.&lt;br&gt;
	So If the size of the SpriteSheetAnimation div is set, the animation will fit in the defined size.&lt;br&gt;
	If a size is not set, it&#x27;ll use the size defined in the JSON object.

	@class Erlik
	@constructor
	@extends BaseDOM
	@param {HTMLElement | String} [target = null] Target textarea element or querySelector.
	@param {Object} [config = {}] Config object for editor.

	The Spritesheet image and json needs to be generated by Adobe Flash.&lt;br&gt;
	It also accepts *trim* and *border* parameters set when exporting the Spritesheet from Adobe Flash.

	Name |Type|Default|Description
	-----|----|:------|-----------
	image|Image|null|Image of spritesheet. It can either be a Image Element or PreloadJS image loader, which gives *data.tag* as image.
	json|Object|null|JSON object defining the spritesheet. It can either be an Object or PreloadJS json loader, which gives *data.tag* as object.
	useBackground|Bool|false|Boolean indicating if the Spritesheet Animation should use as background-image or a image element. Default is **false**. It&#x27;s safer using an Image element instead of background-image for cross-browser integration.

	@example
	&#x60;&#x60;&#x60;
	spritesheet = new SpriteSheetAnimation({image: someImage, json: someJson});
	document.body.appendChild(spritesheet.element);
	sprithesheet.play({repeat: false});
	&#x60;&#x60;&#x60;
	###


	constructor:(target = null, config = {})-&gt;

		BaseView.SHOW

		HomeView.SHOW


		@constructor._init()

		@_dirtyCallbacks = {}
		@_fonts = []

		if target
			if typeof(target) == &#x27;string&#x27;
				if !_target = document.querySelector(target)
					console.warn(target + &#x27; was not found in document.&#x27;)
			else if target instanceof BaseDOM
				_target = target.element
			else
				_target = target
		if !_target
			_target = document.createElement({element: &#x27;textarea&#x27;})
		@_target = _target

		super({element: &#x27;div&#x27;, className: &#x27;erlik&#x27;})
		@_copyCSS()
		@_target.style.display = &#x27;none&#x27;
		if @_target.parentNode
			@_target.parentNode.insertBefore(@element, @_target)
		@element.appendChild(@_target)
		@attr(&#x27;tabindex&#x27;, 0)

		@_toolbar = new slikland.erlik.Toolbar()
		@_toolbar.on(slikland.erlik.Toolbar.ITEM_CHANGE, @_toolbarItemChange)
		@appendChild(@_toolbar)

		@_editor = new slikland.erlik.Editor()
		@_editor.value = @_target.innerText
		@_editor.on(slikland.erlik.Editor.UPDATE_SELECTION, @_editorUpdateSelection)
		@appendChild(@_editor)

		@_pluginController = new slikland.erlik.core.PluginController(@, @_editor, @_toolbar, config)

		@element.on(&#x27;focus&#x27;, @_onFocus)
		@element.on(&#x27;keyup&#x27;, @_keyDown)
	_keyDown:(e)=&gt;
		e.preventDefault()
	_onFocus:()=&gt;
		@_editor.focus()

	_redraw:()-&gt;
		@_editor.css({top: @_toolbar.height + &#x27;px&#x27;})
	_dirty:(type)-&gt;
		@_dirtyCallbacks[type] = true
		clearTimeout(@_dirtyTimeout)
		@_dirtyTimeout = setTimeout(@_updateDirty, 0)

	_updateDirty:()=&gt;
		for k of @_dirtyCallbacks
			@[k]?()
		@_dirtyCallbacks = {}
		@_redraw()

	_copyCSS:()-&gt;
		css = window.getComputedStyle(@_target)
		for k in @constructor.STYLES
			if k == &#x27;position&#x27; &amp;&amp; css[k] == &#x27;static&#x27;
				@element[&#x27;style&#x27;][k] = &#x27;relative&#x27;
			else
				@element[&#x27;style&#x27;][k] = css[k]

	_addFonts:()-&gt;
		fontNames = []
		fontFaces = []
		for f in @_fonts
			fontNames.push(f.name)
			if f.src
				weight = f.weight || &#x27;normal&#x27;
				style = f.style || &#x27;normal&#x27;
				fontFace = &quot;&quot;&quot;@font-face {
					font-family: #{f.name};
					src: url(&#x27;#{f.src}&#x27;), url(&#x27;#{f.src}?#iefix&#x27;) format(&#x27;embedded-opentype&#x27;), url(&#x27;#{f.src}&#x27;) format(&#x27;woff&#x27;), url(&#x27;#{f.src}&#x27;) format(&#x27;truetype&#x27;), url(&#x27;#{f.src}#0e367a30b984427caad4ff30c417ba64&#x27;) format(&#x27;svg&#x27;);
					font-weight: #{weight};
					font-style: #{style};
				}&quot;&quot;&quot;
				fontFaces.push(fontFaces)

		fontFaces = fontFaces.join(&#x27;\n&#x27;)
		if @_fontStyleContainer
			@constructor._appendCSS(fontFaces, @_fontStyleContainer)
		else
			@_fontStyleContainer = @constructor._appendCSS(fontFaces)

	addFont:(name, src = null, weight = &#x27;normal&#x27;, style = &#x27;normal&#x27;)-&gt;
		for f in @_fonts
			if f.name == name
				return
		@_fonts.push({name: name, src: src, weight: weight, style: style})
		@_dirty(&#x27;_addFonts&#x27;)
	addFonts:(arr)-&gt;
		for item in arr
			@addFont(item.name, item.src, item.weight, item.style)

	_editorUpdateSelection:(e, data)=&gt;
		@_pluginController.update(data)
	_toolbarItemChange:(e, target)=&gt;
		command = target.data.command
		if command
			@_editor.execCommand(command, null, target.selected)
		@_editor.update()


window.slikland.Erlik = slikland.Erlik

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
